##############################################################
# IMAGE FOR BUILDING

FROM node:20-bookworm-slim

RUN corepack enable
WORKDIR /home/node/app

COPY package.json .
COPY yarn.lock .

RUN yarn install --immutable

COPY . .

RUN yarn build

##############################################################
# IMAGE FOR RUNNING

FROM nginx:alpine

COPY --from=0 /home/node/app/build /usr/share/nginx/html
